const post=async e=>{try{const t=await fetch(obj.AJAX_URL,{method:"POST",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams(e).toString()});return await t.json()}catch(e){console.log(e)}};document.addEventListener("DOMContentLoaded",()=>{new LazyLoad({});const e=document.querySelector("#btn-menu"),t=document.querySelector("#box-mobile-menu"),o=document.querySelectorAll("#box-mobile-menu ul li"),n=document.querySelector("#box-mobile-menu .overlay"),i=document.querySelector("#mobile-menu"),r=document.querySelector("#page");e.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("active"),i.classList.toggle("active"),r.classList.toggle("disable")}),n.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("active"),i.classList.toggle("active"),r.classList.toggle("disable")}),o.forEach(e=>{e.addEventListener("click",e=>{t.classList.toggle("active"),i.classList.toggle("active"),r.classList.toggle("disable")})});const a=document.querySelector("#btn-search"),s=document.querySelector("#search"),c=document.querySelector("#search .overlay");a.addEventListener("click",e=>{e.preventDefault(),s.classList.toggle("active")}),c.addEventListener("click",e=>{e.preventDefault(),s.classList.toggle("active")}),document.querySelectorAll(".btn-wish").forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();let t=e.currentTarget,o={action:"add_to_wishlist",nonce:t.getAttribute("data-nonce"),context:"frontend",add_to_wishlist:t.getAttribute("data-product-id"),product_type:t.getAttribute("data-product-type")};if(t.classList.toggle("pending"),"exists"!==(await post(o)).result){return t.classList.toggle("pending"),void Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:obj.ADD_TO_WISHLIST})}t.classList.toggle("pending"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:obj.ADD_TO_WISHLIST_EXIST})})});const l=document.querySelectorAll(".btn-cart"),d=document.querySelector("#left-cart .overlay"),u=document.querySelector("#left-cart");l.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();e.currentTarget;u.classList.toggle("active")})}),d.addEventListener("click",e=>{e.preventDefault();e.currentTarget;u.classList.toggle("active")}),document.querySelectorAll(".btn-add").forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();let t=e.currentTarget,o={action:"woocommerce_ajax_add_to_cart",nonce:t.getAttribute("data-nonce"),product_id:t.getAttribute("data-product-id")};t.classList.toggle("pending");const n=await post(o);if(n.success){return t.classList.toggle("pending"),document.querySelector(".cart-item-list").innerHTML=n.data,void u.classList.toggle("active")}t.classList.toggle("pending"),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"error",title:obj.ADD_TO_CART_FAILED})})});const g=document.querySelector(".left-cart");document.addEventListener("click",e=>{let t=e.target;document.querySelectorAll(".btn-remove-item").forEach(async o=>{if(o.contains(t)){e.preventDefault(),g.classList.toggle("--pending");let o=t,n={action:"woocommerce_ajax_remove_item_in_cart",nonce:o.getAttribute("data-nonce"),product_id:o.getAttribute("data-id")};const i=await post(n);if(i.success){return document.querySelector(".cart-item-list").innerHTML=i.data,void g.classList.toggle("--pending")}g.classList.toggle("--pending");Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}})}})}),document.querySelectorAll(".btn-buy").forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();let t=e.currentTarget,o={action:"woocommerce_ajax_add_to_cart",nonce:t.getAttribute("data-nonce"),product_id:t.getAttribute("data-product-id")};t.classList.toggle("pending");const n=await post(o);if(n.success)return t.classList.toggle("pending"),void(window.location.href=obj.CART_URL);console.log(n)})})});